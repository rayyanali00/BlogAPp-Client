(this["webpackJsonpblog-app"]=this["webpackJsonpblog-app"]||[]).push([[0],{22:function(e,t,a){},39:function(e,t,a){},58:function(e,t,a){},69:function(e,t,a){"use strict";a.r(t);var c=a(1),s=a.n(c),l=a(33),n=a.n(l),r=(a(39),a(2)),o=a(5),i=a(6),d=a.n(i),b=(a(58),a.p+"static/media/blog-pic.e28e282e.png"),j=a(11),m=a(0),u=function(e){console.log(e);new j.a;var t=Object(c.useState)(""),a=Object(r.a)(t,2),s=a[0],l=a[1];return Object(c.useEffect)((function(){d.a.get("https://ublog-app.herokuapp.com/user/userdata",{headers:{accessToken:localStorage.getItem("accessToken")}}).then((function(e){var t=e.data.email.match(/^([^@]*)@/)[1];l(t)}))}),[]),Object(m.jsx)("nav",{className:"navbar navbar-expand-lg",children:Object(m.jsxs)("div",{className:"container-fluid",children:[Object(m.jsx)(o.b,{className:"navbar-brand",to:"/blogs",children:Object(m.jsx)("img",{src:b,className:"navimage"})}),Object(m.jsx)("button",{className:"navbar-toggler text-dark",type:"button","data-bs-toggle":"collapse","data-bs-target":"#navbarNav","aria-controls":"navbarNav","aria-expanded":"false","aria-label":"Toggle navigation",children:Object(m.jsx)("span",{class:"navbar-toggler-icon",children:Object(m.jsx)("i",{class:"fas fa-bars",style:{color:"black",fontSize:"".concat(28,"px")}})})}),Object(m.jsxs)("div",{className:"collapse navbar-collapse",id:"navbarNav",children:[Object(m.jsxs)("ul",{className:"navbar-nav mx-auto",children:[Object(m.jsx)("li",{className:"nav-item",children:Object(m.jsx)(o.c,{exact:!0,className:"nav-link",to:"/blogs",children:"Go to Blogs"})}),Object(m.jsx)("li",{className:"nav-item",children:Object(m.jsx)(o.c,{exact:!0,className:"nav-link",to:"/createblog/",children:"Create Blog"})}),Object(m.jsx)("li",{className:"nav-item",children:Object(m.jsx)(o.c,{className:"nav-link",to:"/",onClick:function(){localStorage.removeItem("accessToken"),window.location.redirect="/signin"},children:"Logout"})})]}),Object(m.jsx)("ul",{className:"navbar-nav ml-auto mr-3",children:Object(m.jsx)("li",{children:Object(m.jsxs)("h5",{children:[Object(m.jsx)("i",{class:"fas fa-user"})," ",s]})})})]})]})})},p=a(3),h=a(17),g=a.n(h),x=(a(22),function(e){new j.a;var t,a,s=Object(c.useState)([]),l=Object(r.a)(s,2),n=l[0],i=l[1],b=Object(c.useState)(!0),u=Object(r.a)(b,2),p=u[0],h=u[1],x=Object(c.useState)({isError:!1,message:""}),O=Object(r.a)(x,2),f=O[0],v=O[1],N=Object(c.useState)(""),y=Object(r.a)(N,2),w=(y[0],y[1]);p&&(t=Object(m.jsx)("div",{className:"d-flex justify-content-center",children:Object(m.jsx)("div",{className:"spinner-border",role:"status",children:Object(m.jsx)("span",{className:"visually-hidden",children:"Loading..."})})})),Object(c.useEffect)((function(){d.a.get("https://ublog-app.herokuapp.com/blog",{headers:{accessToken:localStorage.getItem("accessToken")}}).then((function(e){e.data.err?(v({isError:!0,message:"User Not Logged in, please login to see posts"}),h(!1),console.log("afsad")):(w(e.data.email),i(e.data.data),h(!1),console.log(p))}))}),[]),console.log(f),f.isError&&(a=Object(m.jsx)("h1",{className:"text-danger",children:f.message}));var k;return k=n.length>=1?n.map((function(e){var t=g()(e.createdAt);return t=t.format("MMM Do"),console.log(t),Object(m.jsx)("div",{className:"col-lg-3 mt-5",children:Object(m.jsxs)("div",{className:"card blog-card",children:[Object(m.jsx)("img",{src:"https://ublog-app.herokuapp.com/"+e.image,className:"card-img-top",alt:"blog_image",height:"200"}),Object(m.jsxs)("div",{className:"card-body blog-card-body",children:[Object(m.jsx)(o.c,{exact:!0,to:"/detail/".concat(e._id),className:"text-decoration-none blog-title",children:e.title}),Object(m.jsx)("br",{}),Object(m.jsx)(o.c,{exact:!0,to:"/detail/".concat(e._id),className:"text-decoration-none",children:Object(m.jsx)("button",{className:"btn btn-dark mt-2",children:"Read Full Blog"})}),Object(m.jsx)("button",{className:"btn btn-outline-danger d-none",onClick:function(){!function(e){d.a.delete("https://ublog-app.herokuapp.com/blog/".concat(e)).then((function(e){console.log("Blog Deleted")})).catch((function(e){return console.log(e)}));var t=n.filter((function(t){return t._id!==e}));i(t)}(e._id)},children:"Delete"}),Object(m.jsx)(o.c,{exact:!0,to:"/update/".concat(e._id),children:Object(m.jsx)("button",{className:"btn btn-outline-primary d-none",children:"Edit"})})]}),Object(m.jsx)("div",{class:"card-footer text-muted",style:{fontSize:"".concat(.7,"em")},children:Object(m.jsxs)("div",{className:"row",children:[Object(m.jsxs)("div",{className:"col-lg-6",children:["Published by: ",e.createdby]}),Object(m.jsxs)("div",{className:"col-lg-6",children:["Published at: ",t]})]})})]})},e._id)})):Object(m.jsx)("div",{className:"col-lg-12 mt-5 text-center",children:Object(m.jsx)("h2",{children:"No Blog Found"})}),Object(m.jsxs)("div",{className:"container",children:[t,a,Object(m.jsx)("div",{className:"row row-cols-1 row-cols-md-2 g-4",children:k})]})}),O=a(18),f=a(13),v=a(7),N=function(e){new j.a;var t=Object(c.useState)({title:"",description:"",createdby:""}),a=Object(r.a)(t,2),s=a[0],l=a[1],n=Object(c.useState)(""),o=Object(r.a)(n,2),i=o[0],b=o[1],u=function(e){l(Object(v.a)(Object(v.a)({},s),{},Object(f.a)({},e.target.id,e.target.value)))};return Object(m.jsx)("div",{className:"container mt-3",children:Object(m.jsxs)("div",{className:"row",children:[Object(m.jsx)("div",{className:"col-lg-4"}),Object(m.jsx)("div",{className:"col-lg-4 create-blog-sec",children:Object(m.jsxs)("form",{onSubmit:function(e){e.preventDefault(),console.log(s);var t=new FormData;t.append("title",s.title),t.append("description",s.description),t.append("createdby",s.createdby),t.append("image",i);var a,c=Object(O.a)(t.entries());try{for(c.s();!(a=c.n()).done;){var l=a.value;console.log(l[0]+", "+l[1])}}catch(n){c.e(n)}finally{c.f()}d.a.post("https://ublog-app.herokuapp.com/blog/createblogs",t,{headers:{accessToken:localStorage.getItem("accessToken")}}).then((function(e){console.log(e),200===e.status&&(console.log("REDIRECTION avec status => ",e.status),window.location="/blogs")})).catch((function(e){return console.log(e)}))},encType:"multipart/form-data",children:[Object(m.jsxs)("div",{className:"mb-3 text-center",children:[Object(m.jsx)("label",{htmlFor:"title",className:"form-label",children:"Title"}),Object(m.jsx)("input",{type:"text",className:"form-control w-100",id:"title",name:"title",placeholder:"Enter title...",value:s.title,onChange:u,required:!0})]}),Object(m.jsxs)("div",{className:"mb-3 text-center",children:[Object(m.jsx)("label",{htmlFor:"description",className:"form-label",children:"Description"}),Object(m.jsx)("textarea",{className:"form-control",id:"description",rows:"6",name:"description",placeholder:"Enter description...",value:s.description,onChange:u,required:!0})]}),Object(m.jsxs)("div",{className:"mb-3 text-center",children:[Object(m.jsx)("label",{htmlFor:"createdby",className:"form-label",children:"Created By"}),Object(m.jsx)("input",{className:"form-control w-100",id:"createdby",name:"createdby",placeholder:"Enter author name...",onChange:u,value:s.createdby,required:!0})]}),Object(m.jsxs)("div",{className:"mb-3 text-center",children:[Object(m.jsx)("label",{htmlFor:"image",className:"form-label",children:"Upload Image"}),Object(m.jsx)("input",{className:"form-control w-100",type:"file",id:"image",name:"image",onChange:function(e){b(e.target.files[0])},required:!0})]}),Object(m.jsx)("div",{className:"mb-2 text-center",children:Object(m.jsx)("button",{type:"submit",className:"btn btn-primary",children:"Create Blog"})})]})})]})})},y=function(e){new j.a;var t,a=e.match.params.id,s=Object(c.useState)({}),l=Object(r.a)(s,2),n=l[0],i=l[1],b=Object(c.useState)(!0),u=Object(r.a)(b,2),p=u[0],h=u[1];console.log(p),p&&(t=Object(m.jsx)("div",{className:"d-flex justify-content-center",children:Object(m.jsx)("div",{className:"spinner-border",role:"status",children:Object(m.jsx)("span",{className:"visually-hidden",children:"Loading..."})})})),Object(c.useEffect)((function(){d.a.get("https://ublog-app.herokuapp.com/blog/".concat(a),{headers:{accessToken:localStorage.getItem("accessToken")}}).then((function(e){console.log(e.data),i(e.data),h(!1),console.log(p)})).catch((function(e){return console.log(e)}))}),[]);var x=g()(n.createdAt);return x=x.format("MMM Do"),console.log(x),Object(m.jsxs)("div",{className:"container",children:[t,Object(m.jsxs)("div",{className:"row row-cols-1 row-cols-md-2 g-4",children:[Object(m.jsx)("div",{className:"col-lg-2"}),Object(m.jsx)("div",{className:"col-lg-8 mt-5",children:Object(m.jsxs)("div",{className:"card detail-card",children:[Object(m.jsx)("img",{src:"https://ublog-app.herokuapp.com/"+n.image,className:"card-img-top",alt:"blog_image",height:"300"}),Object(m.jsxs)("div",{className:"card-body text-left",children:[Object(m.jsx)("h5",{className:"card-title",children:n.title}),Object(m.jsx)("p",{className:"card-text desc",children:n.description}),Object(m.jsx)(o.c,{exact:!0,to:"/update/".concat(n._id),children:Object(m.jsx)("button",{className:"btn btn-outline-primary",children:"Edit"})})]}),Object(m.jsx)("div",{class:"card-footer text-muted",style:{fontSize:"".concat(.9,"em")},children:Object(m.jsxs)("div",{className:"row",children:[Object(m.jsxs)("div",{className:"col-lg-6",children:["Published by: ",n.createdby]}),Object(m.jsxs)("div",{className:"col-lg-6",children:["Published at: ",x]})]})})]})},n._id)]})]})},w=function(e){new j.a;var t=e.match.params.id,a=Object(c.useState)({title:"",description:"",createdby:""}),s=Object(r.a)(a,2),l=s[0],n=s[1],o=Object(c.useState)(""),i=Object(r.a)(o,2),b=i[0],u=i[1];Object(c.useEffect)((function(){d.a.get("https://ublog-app.herokuapp.com/blog/".concat(t),{headers:{accessToken:localStorage.getItem("accessToken")}}).then((function(e){console.log(e.data),n({title:e.data.title,description:e.data.description,createdby:e.data.createdby}),u(e.data.image)})).catch((function(e){return console.log(e)}))}),[]);var p=function(e){n(Object(v.a)(Object(v.a)({},l),{},Object(f.a)({},e.target.id,e.target.value)))};return Object(m.jsx)("div",{className:"container",children:Object(m.jsxs)("div",{className:"row",children:[Object(m.jsx)("div",{className:"col-lg-4"}),Object(m.jsx)("div",{className:"col-lg-4 mt-4 create-blog-sec",children:Object(m.jsxs)("form",{onSubmit:function(e){e.preventDefault(),console.log(b);var a=new FormData;a.append("title",l.title),a.append("description",l.description),a.append("createdby",l.createdby),a.append("image",b);var c,s=Object(O.a)(a.entries());try{for(s.s();!(c=s.n()).done;){var n=c.value;console.log(n[0]+", "+n[1])}}catch(r){s.e(r)}finally{s.f()}d.a.post("https://ublog-app.herokuapp.com/blog/update/".concat(t),a,{headers:{accessToken:localStorage.getItem("accessToken")}}).then((function(e){console.log("Data Updated"),console.log(e.data),window.location.href="/blogs"})).catch((function(e){return console.log(e)}))},encType:"multipart/form-data",children:[Object(m.jsxs)("div",{className:"mb-3 text-center",children:[Object(m.jsx)("label",{htmlFor:"title",className:"form-label",children:"Title"}),Object(m.jsx)("input",{type:"text",className:"form-control w-100",id:"title",name:"title",placeholder:"Example input placeholder",value:l.title,onChange:p,required:!0})]}),Object(m.jsxs)("div",{className:"mb-3 text-center",children:[Object(m.jsx)("label",{htmlFor:"description",className:"form-label",children:"Description"}),Object(m.jsx)("textarea",{className:"form-control",id:"description",rows:"6",name:"description",value:l.description,onChange:p,required:!0})]}),Object(m.jsxs)("div",{className:"mb-3 text-center",children:[Object(m.jsx)("label",{htmlFor:"createdby",className:"form-label",children:"Created By"}),Object(m.jsx)("input",{className:"form-control w-100",id:"createdby",name:"createdby",value:l.createdby,onChange:p,required:!0})]}),Object(m.jsxs)("div",{className:"mb-3 text-center",children:[Object(m.jsx)("label",{htmlFor:"image",className:"form-label",children:"Upload Image"}),Object(m.jsx)("input",{className:"form-control w-100",type:"file",id:"image",name:"image",onChange:function(e){u(e.target.files[0])},required:!0})]}),Object(m.jsx)("div",{className:"mb-3 text-center",children:Object(m.jsx)("button",{type:"submit",className:"btn btn-primary",children:"Update Blog"})})]})})]})})},k=function(e){return console.log(e),Object(m.jsx)("div",{children:Object(m.jsx)("div",{className:"alert alert-danger",role:"alert",children:e.errorMsg})})},S=function(){var e,t=Object(c.useState)({email:"",password:""}),a=Object(r.a)(t,2),s=a[0],l=a[1],n=Object(c.useState)({isError:!1,message:""}),i=Object(r.a)(n,2),j=i[0],u=i[1];j.isError&&(e=Object(m.jsx)(k,{errorMsg:j.message})),setTimeout((function(){j.isError&&u(Object(v.a)(Object(v.a)({},e),{},{isError:!1}))}),4e3);var p=function(e){l(Object(v.a)(Object(v.a)({},s),{},Object(f.a)({},e.target.id,e.target.value)))};return Object(m.jsx)("div",{className:"container mt-5",children:Object(m.jsxs)("div",{className:"row",children:[Object(m.jsx)("div",{className:"col-lg-4"}),Object(m.jsxs)("div",{className:"col-lg-4 signup-form mt-5",children:[e,Object(m.jsx)("div",{className:"text-center",children:Object(m.jsx)("img",{src:b,className:"signupimg"})}),Object(m.jsx)("hr",{}),Object(m.jsxs)("form",{onSubmit:function(e){e.preventDefault();var t={email:s.email,password:s.password};d.a.post("https://ublog-app.herokuapp.com/user/signup",t).then((function(e){console.log(e.data),u({isError:!0,message:e.data.err}),200==e.status&&(window.location.href="/")}))},className:"mt-3",children:[Object(m.jsxs)("div",{className:"form-group text-center",children:[Object(m.jsx)("label",{children:Object(m.jsx)("i",{class:"fas fa-envelope mb-2",style:{fontSize:"2em",color:"black"}})}),Object(m.jsx)("input",{type:"email",name:"email",id:"email",className:"form-control",onChange:p,placeholder:"Enter your email address",required:!0})]}),Object(m.jsxs)("div",{className:"form-group mt-4 text-center",children:[Object(m.jsx)("label",{children:Object(m.jsx)("i",{class:"fas fa-lock-open mb-2",style:{fontSize:"2em",color:"black"}})}),Object(m.jsx)("input",{type:"password",name:"password",id:"password",className:"form-control",placeholder:"Enter your password",onChange:p,required:!0})]}),Object(m.jsx)("div",{className:"text-center",children:Object(m.jsxs)("button",{type:"submit",className:"btn btn-outline-dark my-4",children:["Signup ",Object(m.jsx)("i",{class:"fas fa-sign-in-alt"})]})})]}),Object(m.jsx)("div",{className:"text-center",children:Object(m.jsx)(o.b,{to:"/",children:"Already a member?"})})]})]})})},E=function(){new j.a;var e,t=Object(c.useState)({email:"",password:""}),a=Object(r.a)(t,2),s=a[0],l=a[1],n=Object(c.useState)({isError:!1,message:""}),i=Object(r.a)(n,2),u=i[0],p=i[1],h=function(e){l(Object(v.a)(Object(v.a)({},s),{},Object(f.a)({},e.target.id,e.target.value)))};return u.isError&&(e=Object(m.jsx)(k,{errorMsg:u.message})),Object(m.jsx)("div",{className:"container mt-5",children:Object(m.jsxs)("div",{className:"row",children:[Object(m.jsx)("div",{className:"col-lg-4"}),Object(m.jsxs)("div",{className:"col-lg-4 signup-form mt-5",children:[e,Object(m.jsx)("div",{className:"text-center",children:Object(m.jsx)("img",{src:b,className:"signupimg"})}),"    ",Object(m.jsx)("hr",{}),Object(m.jsxs)("form",{onSubmit:function(e){e.preventDefault();var t={email:s.email,password:s.password};d.a.post("https://ublog-app.herokuapp.com/user/signin",t).then((function(e){e.data.err?p({isError:!0,message:e.data.err}):(localStorage.setItem("accessToken",e.data.token),window.location.href="/")}))},className:"mt-3",children:[Object(m.jsxs)("div",{className:"form-group text-center",children:[Object(m.jsx)("label",{children:Object(m.jsx)("i",{class:"fas fa-envelope mb-2",style:{fontSize:"2em",color:"black"}})}),Object(m.jsx)("input",{type:"email",name:"email",id:"email",className:"form-control",onChange:h,placeholder:"Enter your email address",required:!0})]}),Object(m.jsxs)("div",{className:"form-group text-center mt-4",children:[Object(m.jsx)("label",{children:Object(m.jsx)("i",{class:"fas fa-lock-open mb-2",style:{fontSize:"2em",color:"black"}})}),Object(m.jsx)("input",{type:"password",name:"password",id:"password",className:"form-control",placeholder:"Enter your password",onChange:h,required:!0})]}),Object(m.jsx)("div",{className:"text-center",children:Object(m.jsxs)("button",{type:"submit",className:"btn btn-outline-dark my-4",children:["Signin ",Object(m.jsx)("i",{class:"fas fa-sign-in-alt"})]})})]}),Object(m.jsx)("div",{className:"text-center",children:Object(m.jsx)(o.b,{to:"/signup",className:"text-center",children:"Not registered?"})})]})]})})},T=function(){return Object(m.jsx)("div",{className:"App",children:Object(m.jsx)(o.a,{children:Object(m.jsxs)(p.c,{children:[Object(m.jsx)(p.a,{exact:!0,path:"/signup",component:S}),Object(m.jsx)(p.a,{exact:!0,path:"/",component:E}),Object(m.jsxs)("div",{children:[Object(m.jsx)(u,{}),Object(m.jsx)(p.a,{exact:!0,path:"/detail/:id",component:y}),Object(m.jsx)(p.a,{exact:!0,path:"/blogs",component:x}),Object(m.jsx)(p.a,{exact:!0,path:"/update/:id",component:w}),Object(m.jsx)(p.a,{exact:!0,path:"/createblog/",component:N})]})]})})})},C=function(e){e&&e instanceof Function&&a.e(3).then(a.bind(null,70)).then((function(t){var a=t.getCLS,c=t.getFID,s=t.getFCP,l=t.getLCP,n=t.getTTFB;a(e),c(e),s(e),l(e),n(e)}))};n.a.render(Object(m.jsx)(s.a.StrictMode,{children:Object(m.jsx)(T,{})}),document.getElementById("root")),C()}},[[69,1,2]]]);
//# sourceMappingURL=main.cf04956e.chunk.js.map